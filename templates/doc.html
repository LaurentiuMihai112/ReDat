<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>ReDat Scholarly HTML Report</title>

    <link rel="stylesheet" href="https://w3c.github.io/scholarly-html/css/scholarly.min.css">
    <script src="https://w3c.github.io/scholarly-html/js/scholarly.min.js"></script>
</head>
<body>
<header>
    <div class="banner">
        <img style="width: 100%" src="/static/assets/scholarly-html.svg" width="227" height="50" alt="Scholarly HTML logo">
    </div>
    <h1><project>ReDat</project> Raport - Scholarly HTML</h1>
</header>

<div role="contentinfo">
    <dl>
        <dt>Authors</dt>
        <dd>
            <a href="https://github.com/LaurentiuMihai112" target="_blank">Mihai Cristian-Laurentiu</a>,
            <a href="https://github.com/StamateValentin" target="_blank">Stamate Valentin</a>
        </dd>
    </dl>
</div>
<section typeof="sa:Abstract" id="abstract" role="doc-abstract">
    <h2>Abstract</h2>
    <p>
        Acest document cuprinde aspectele tehnice si interactiunea cu utilizatorul, ale proiectului ReDat pentru
        <web>Tehnologii Web</web>, realizat in coloborare de
        <a href="https://github.com/LaurentiuMihai112">Mihai Cristian-Laurentiu</a> si
        <a href="https://github.com/StamateValentin">Stamate Valentin</a> pentru Tehnologii Web (2021).
        <br>
        <br>
        <infoiasi><i>Universitatea Alexandru Ioan Cuza din Iasi, Facultatea de Informatica</i></infoiasi>
    </p>
</section>
<!--1.Introduction-->
<section id="introduction" role="doc-introduction">
    <h2>Introducere</h2>
    <section id="purpose">
        <!-- review? -->
        <h3>Scop</h3>
        <p>
            Aplicatia Web ReDat, detaliata in acest document, creeaza un spatiu pentru utilizator in care
            acesta poate grupa,vedea si gestiona topicele (subreddit-urile) favorite, oferite de Reddit printr-un
            API public. Astfel utilizatorul poate aceesa mai rapid si mai comod subiectele sale de interes.
        </p>
    </section>

    <section id="intended-audience">
        <h3>Public È›inta</h3>
        <p>
            In continuare vom prezenta o descriere generala a aplicatiei, urmand ca apoi sa fie detaliata
            interactiunea utlizatorului cu aceasta. Acest document se adreseaza in principal utilizatorului obisnuit,
            si vizeaza in special principalele functionalitati ale aplicatiei si modul de interactiune cu utlizatorul,
            pentru a facilita utilizarea aplicatiei.
        </p>
    </section>
    <section id="scope">
        <h3>Viziune</h3>
        <p>
            Aplicatia doreste sa usureze efortul depus de utilizator pentru a accesa subreddit-urile favorite,
            prin gruparea acestora dupa preferintele stabilite de utilizator si prin usoara genstionare a
            acestor preferinte. De asemenea sunt puse la dispozitie statistici pentru a avea o perspectiva
            mai buna asupra lor.
        </p>
    </section>
</section>

<!-- 2. Description -->
<section id="description" role="doc-introduction">
    <h2>Descriere</h2>
    <section id="perspective">
        <h3>Perspectiva</h3>
        <p>
            Aplicatia vine ca o extensie pentru site-ul Reddit, oferind utilizatorului o viziune mai larga
            asupra celor mai populare topice.
        </p>
    </section>

    <section id="functions">
        <h3>Functiile Produsului</h3>
        <p>
            Mai jos sunt functionalitatile pe care aplicatia ReDat le ofera.
        <ul>
            <li>Crearea unui cont si inregistrarea unui utilizator</li>
            <li>Modificarea datelor asociate utilizatorului</li>
            <li>Alegerea topicelor preferate</li>
            <li>Schimbarea temei site-ului</li>
            <li>Notificari in timp real asupra modificarilor unui subreddit</li>
            <li>Vizualizarea celor mai populare subreddituri si statistici asociate lor</li>
            <li>Oferirea de statistici in format csv si svg printr-un API</li>
            <li>Actualizarea in timp real a statisticilor.</li>
        </ul>
        </p>
    </section>
    <section id="operating-environment">
        <h3>Mediul de operare</h3>
        <p>
            Fiind o aplicatie web, ea va rula pe orice browser modern. Astfel aplcatia va putea rula
            pe toate sistemele de operare ce suporta un browser cum ar fi: Android, IOS, Windows, Linux, etc.
        </p>
    </section>
    <section id="constraints">
        <h3>Constrangeri</h3>
        <p>
            Deoarece aplicatia depinde in mod direct de API-ul oferit de Reddit, orice modificare se va propaga
            inclusiv in aplicatie, putand-o face nefunctionala. Aplicatia nu va integra functionalitatile pe care
            aplicatia Reddit deja le are, ci mai degraba functioneaza ca o extensie asupra ei avand linkuri care
            redirectioneaza catre topicele preferate.
        </p>
        <p>
            Un alt lucru, il reprezinta datele oferite. Acestea pot oferi informatii insuficiente
            pentru atragerea
            utilizatorilor. API-ul public oferit de Reddit ofera informatii despre cel mult ultimele
            1000 de postari dintr-un subreddit. Acest lucru limiteaza crearea statiscile si
            informatiile care pot fi oferite utilizatorului.
        </p>
    </section>
</section>

<!--3.External Interface Requirements-->
<section id="interfaces">
    <h2>Interfete externe</h2>
    <section id="user-interfaces">
        <h3>Interfata pentru utlizator</h3>
        <p>
            Aplicatia ofera o interfata moderna, placuta din punct de vedere vizual pentru a imbunatati
            experienta utilizatorului. ReDat poate fi folosita atat pe ecrane mari cat si pe browserul
            telefonului al carui ecran este de dimensiuni mai reduse, oferind in continuare o experienta
            placuta utilizatorului datorita design-ului responsive.
        </p>
        <p>
            De asemenea utilizatorul are posibilitatea sa modifice tema de culori pestabilita a aplicatiei,
            putand opta pentru o tema intunecata. Acest lucru este posibil prin pagina "User profile" din
            aplicatie, care ofera diferite optiuni de configurare.
        </p>
    </section>

    <section id="software-interfaces">
        <h3>Interfete software</h3>
        <p>
            Aplicatia este in stansa legatura cu API-ul public oferit de Reddit. La fiecare request
            vor fi atasate topicele si se va face o selectie bazata pe cele mai populare subreddituri dupa
            anumite criterii(nr utilizatori, comentarii, upvotes, etc).
        </p>
        <p>
            Baza de date folosita este PostgreSQL deoarece se poate integra usor cu limbajul de programare pentru
            partea de backend. Un alt motiv fiind suportul gratuit pe platforma Heroku, locul unde este hostata aplicatia.
        </p>
        <p>
            Design-ul arhitectural al aplicatiei este MVC(Model - View - Controller) pentru a modulariza aplicatia si a usura
            scrierea de cod. Partea de Model este asociata parii de <b>server</b> a aplicatiei care face interogari si preia date din
            baza de date. Partea de View este asociata tot a celei de <b>server</b> unde o parte din endpoint-uri ofera template-ul html
            cerut dar si alte fisiere statice cum ar fi: fisiere javascript, css, imagini, etc. In final partea de Controller este
            asociata partii <b>proxy</b> care face un request catre template-ul aplicatiei apeland un enpoint de la partea de <b>server</b>
            , preia datele necesare pentru a le atasa template-ului(oferite de microserviciul <b>auth</b>), le imbina folosing o functie
            specializata in python si returneaza pagina utilizatorului. Ca un mic exemplu, templetizand footer-url si topbar-ul separandu-le
            de paginile care le folosesc, modificare lor se propaga peste tot pe site deoarece la randare sunt preluate componentele si imbinate
            pentru a face o pagina intraga.
        </p>
        <p>
            Frontend-ul este scris in HTML5, CSS3 si Javascript fara a folosi alte librarii. Pentru o experianta mai
            buna aplicatia va folosi fontul Roboto oferit de Google Fonts impreuna cu packetul de iconite.
        </p>
        <p>
            Pentru backend se va folosi Python impreuna cu libratia Gunicorn pentru a usura prelarea informatiilor
            dintr-un request http. Arhitectura folosita este MVC.
        </p>
    </section>

    <section id="communication-interfaces">
        <h3>Interfete de comunicare</h3>
        <p>
            Aplicatia este impartita in 4 microservitii dupa cum este ilustrat in diagrama de mai jos:
            <br>
            <img src="/static/diagrams/microservice-diagram.svg" alt="">
            <br>

            <ul>
                <li>
                    Proxy: Se detine toate tipurile de requesturi: request catre o pagina, sau un endpoint de tip rest.
                    Acesta, in functie de tipul de requets, face apel la celelalte microservicii si se foloseste de datele
                    returnate pentru a le trimite mai departe catre client. Clientul are acces doar la aces microserviciu si serveste
                    ca un Proxy pentru celelalte componente.
                </li>
                <li>
                    Auth: Aceast microserviciu se ocupa cu verificarea veridicitatii utilizatorului pentru tokenul oferit. Daca tokenul
                    este valid face un request catre microserviciul server pentru a prelua toate datele acelui utilizator in caz de nevoie,
                    altfel un status de eroare va fi trimis. Acesta faciliteaza insa si partea de login si register a aplicatiei: in momentul
                    cand un utilizator de logheza este facut un request catre acest serviciu care face la randul lui un request catre partea de
                    server iar in caz de succes, este returnat tokenul pentru autentificarile viitoare. Similar pentru register.
                </li>
                <li>
                    Server: Se ocupa cu manipularea de date din baza de date. Acest microserviciu are increderea ca datele primite sunt valide
                    deoarece validarea se face in celelalte componente(exceptie: compararea parolelor, etc). Acesta detine tot continutul static
                    al aplicatiei: template-uri html, imagini, etc care este trimis catre partea de proxy a aplicatiei.
                </li>
                <li>
                    External: Preia date de la API-ul public Reddit si ofera date si statisti
                    interpretate fie prin formatul csv sau
                    ca si imagini svg. Cele 3 statitisci oferite pentru fiecare subreddit monitorizat de
                    catre aplicatie se refera la comentariile, voturile pozitive, voturile negative si
                    ratia dintre voturi. Aplicatia ReDat preia datele despre postarile dintr-un
                    subreddit din 10 in 10 minute si salveaza informatiile din ultima ora.
                </li>
            </ul>
        </p>
        <p>
            Aplicatia detine enpointuri de tip Rest pe care aplicatia le foloseste folosing AJAX.
            Formatul de trimitere/primire este JSON.
            Acestea au urmatoarele caracteristici:
            login, register, preluarea statisticilor, descarcarea statisticilor, preluarea comentariilor, etc. Pentru a identifica
            ce continut este necesar se ataseaza la body-ul requestului payload-ul necesar. Raspunsul este preluat de catre javascript si
            aplica modificarile necesare.
        </p>
        <p>
            La incarcarea fiecarei pagini se preia cookie-ul care retine tokenul din header, se verifica, si in cazul in care verificarea esueaza, o pagina
            de tip redirect este incarcata care trimite utilizatorul pe pagina de login unde sunt sterse toate cookie-urile.
            Autentificarea este de tip JWT unde se ataseaza cateva informatii despre utilizator. Tokenul este creat de catre microserviciul <b>auth</b>
            care pe baza unei chei secrete pe care o detine, creaza semnatura care este atasata la cele doua componente ale tokenului (algorithm-type.payload).
            Acest token este tinut intr-un cookie si folosit la randarea paginilor in mod direct, sau atunci cand se face un request de tip rest.
        </p>
    </section>
    <section id="statistics-api">
        <h3>Interfata pentru statistici</h3>
        <p>
            Aplicatia ReDat monitorizeaza activitatea celor mai populare subreddit-uri asociate unui subiect de interes;
            astfel realizand statistici disponibile atat in format csv cat si svg. Statisticile monitorizeaza
            numarul de like-uri, dislike-uri, commentarii si ratia voturilor.
        </p>
        <h4> Statistici tip CSV</h4>
        <p>
            Acestea monitorizeaza (din 10 in 10 minute) activitatea din ultima ora, din toate subiectele de interes
            disponibile in aplicatie.
        <h5>Upvotes</h5>
        <p>
            Acestea pot fi accesate prin endpoint-ul <b>/api/statistic/csv/ups</b> folosind un request de tip GET. Interfata
            ofera informatiile de tip csv, sub forma de text. Coloanele oferite sunt Topic (subiectul de interes
            monitorizat), 60 min, 50 min,..., 10 min care reprezinta situatia voturilor pozitive pentru ultimele 1000 de
            postari in urma cu 10 min, 20 min, etc.
        </p>
        <h5>Downvotes</h5>
        <p>
            Acestea pot fi accesate prin endpoint-ul <b>/api/statistic/csv/downs</b> folosind un request de tip GET.
            Interfata ofera informatiile de tip csv, sub forma de text. Coloanele oferite sunt Topic (subiectul de
            interes monitorizat), 60 min, 50 min,..., 10 min care reprezinta situatia voturilor negative pentru ultimele
            1000 de postari in urma cu 10 min, 20 min, etc.
        </p>
        <h5>Upvote ratio</h5>
        <p>
            Acesta poate fi accesata prin endpoint-ul <b>/api/statistic/csv/upvote_ratio</b> folosind un request de tip GET.
            Interfata ofera informatiile de tip csv, sub forma de text. Coloanele oferite sunt Topic (subiectul de
            interes monitorizat), 60 min, 50 min,..., 10 min care reprezinta situatia ratiei dintre voturi pentru
            ultimele 1000 de postari in urma cu 10 min, 20 min, etc.
        </p>
        <h5>Comments</h5>
        <p>
            Acestea pot fi accesate prin endpoint-ul <b>/api/statistic/csv/comments</b> folosind un request de tip GET.
            Interfata ofera informatiile de tip csv, sub forma de text. Coloanele oferite sunt Topic (subiectul de
            interes monitorizat), 60 min, 50 min,..., 10 min care reprezinta situatia comentariilor pentru ultimele 1000
            de postari, in urma cu 10 min, 20 min, etc.
        </p>
        </p>
        <h4> Statistici tip SVG</h4>
        <p>
            Aceste statistici ofera datele din fisierele csv mentionate anterior sub forma unor grafice in foramt svg.
            Ele pot fi accesate printr-un request de tip get cu parametrul "topic" avand valoarea dorita. Toate subiectele 
            de interes pentru care pot fi preluate statistici pot fi vazute
            fie in statisticile csv fie printr-un request de tip get la endpoint-ul <b>/api/statistic/topics</b> Statisticile pot fi accesate
            prin urmatoarele endpoint-uri:
        <ul>
            <li>
                <b>/api/statistic/ups_downs</b> pentru un grafic despre situatia din ultima ora a like-urilor si
                dislike-urilor
                pentru ultimele 1000 de postari asociate topicului mentionat.
            </li>
            <li>
                <b>/api/statistic/comments</b> pentru un grafic despre situatia din ultima ora a comentariilor
                pentru ultimele 1000 de postari asociate topicului mentionat.
            </li>
            <li>
                <b>/api/statistic/upvote_ratio</b> pentru un grafic despre situatia din ultima ora a ratiei dintre voturi
                pentru ultimele 1000 de postari asociate topicului mentionat.
            </li>
            <li>
                <b>/api/statistic/general</b> pentru un grafic despre situatia generala a subiectelor de interes ( Cele mai
                populare 10 , in functie de numarul de voturi din utlima ora). Acest request nu necesita parametru
            </li>

        </ul>
        </p>
    </section>
</section>

<section id="source-code">
    <h2>Gestionarea Codului</h2>
    <p>
        Pentru genstionarea codului sursa a proiectului s-a folosit <a href="https://github.com" target="_blank">GitHub</a>.
        Commiturile sunt realizate de ambii membrii ai echipei. Pentru ca fiecare membru a lucrat la feature-uri diferite,
        nu a fost necesara folosirea de branch-uri multiple.
    </p>
    <p>
        Codul sursa al proiectului va fi disponibil <a href="https://github.com/StamateValentin/ReDat" target="_blank">aici</a>
        atunci cand va fi facut public.
    </p>
</section>

<section>
    <h2>Securitate</h2>
    <section>
        <h2>SQL Injection</h2>
        <p>
            Site-ul previne atacurile de tipul SQL-Injection. Utilizatorul nu este lasat sa introduca la caractere speciale precum '
            verificarea facandu-se la nivel de server. Astfel nu se va putea rula cod SQL in baza de date atunci cand un utilizator
            este este creat sau orice alta interactiune in care o noua inregistrarea este adaugata/modificata in baza de date.
        </p>
    </section>
    <section>
        <h2>Cross Site Scripting</h2>
        <p>
            De asemenea, un alt nivel de securitate este adaugat si anume Cross Site Scripting. Preventia acestuia se face parsand caracterele
            speciale html: <, >, " dezactivand astfel orice script javascript.
        </p>
    </section>
</section>

<!--4.System Features-->
<section id="system-features">
    <!-- review? -->
    <h2>Functionalitati</h2>
    <section id="login">
        <h3>Autentificarea</h3>
        <p>
            Autentificarea utilizatorului se realizeaza in pagina dedicata acestei operatii si presupune
            completarea campurilor necesare (nume de utilizator sau email, parola) urmand ca apoi utlizatorul
            sa apese pe butonul "login" si, in cazul in care datele sunt corecte, acesta sa fie redirectionat
            pe pagina principala (Home). Desigur, autentificarea necesita exista unui cont de utilizator.
        </p>
    </section>
    <section id="register">
        <h3>Inregistrarea</h3>
        <p>
            Aceasta operatie presupune creare unui nou cont de utlizator. Utilizatorul completeaza
            campurile necesare (nume de utlizator, email, parola, confirmare parola), apasa pe butonul
            "register" si, in cazul in care informatiile sunt valide ( nume de utlizator este nou,
            email respecta formatul standard, parola corespunde), utilizatorul este redirectionat pe pagina
            de confirmare a adresei de email, dupa confirmare, un nou cont de utilizator fiind creat.
        </p>
    </section>

    <section id="top-subbreddits">
        <h3>Vizualizarea celor mai populare subbreddit-uri</h3>
        <p>
            Bazat pe topicele alese de utilizator, fie la crearea contului, fie in setari, utlizatorul va putea vedea
            in pagina home cele mai populare subreddit-uri sub forma unei liste. Fiecare element al listei va contine
            informatii referitare la subreddit iar utilizatorul va putea vedea mai multe tipuri de statistici.
            Un alt feature important este notificarea in timp real atunci cand subredditul respectiv sufera
            schimbari (comentariu nou, etc). Lista va contina si titlurile ultimelor 10 postari din acel subreddit,
            asocite cu un link catre acea postare.
        </p>
    </section>

    <section id="user-settings">
        <h3>Setarile Utilizatorului</h3>
        <p>
            Utilizatorul va putea accesa setari asociate contului sau. Astfel el va putea schimba parola, modifica
            mailul si alte informatii referitoare la contul personal. Tot in pagina de setari va putea modifica
            topicele preferate si va putea schimba intre tema dark si light.
        </p>

    </section>
    <section id="API">
        <h3>API-ul oferit</h3>
        <p>
            Aplicatia ReDat pune la dispozitie un API (Application Programming Interface) pentru a putea prelua
            statisticile realizate. Interfata este documentata intr-un document separat disponibil <a href="/api_documentation">aici</a>
        </p>
    </section>

    <!-- 5. UI/UX -->
    <section id="user-interface" role="doc-introduction">
        <h2>Interfata si Motivatie</h2>
        <p>
            Interfata aplicatitei este simpla si in acelasi timp moderna deoarece contine concepte curente cum ar fi:
            colturi rotunjite, folosirea fontului Roboto, comutarea intre temele light si dark, etc, elemente menite sa
            atraga utilizatorul.
        </p>
        <p>
            Pentru create layout-ului fiecare pagina s-a structurat folosind grid si flex deoarece se poate construi
            foarte
            usor interfete dar
            si alinierea elementelor interne. Pentru tema light s-au folosit diferite nuante progresive de gri, iar
            pentru
            tema dark in mod
            similar pentru a standardiza culorile si o mai buna mentenanta.
        </p>
        <p>
            Foile de still css au fost modularizate pentru scalabilitate, fiecare fisier css reprezinta un singur
            obiect/layout, astfel
            o modificare(de exemplu la un buton) se face intr-un fisier iar modificarile se propaga oriunde este folosit
            acel fisier.
            De asemenea, pentru a avea un singur loc in care sunt puse dimensiuni/culori au fost create variabile css.
        </p>
        <p>
            Aplicatia este responsive astfel ea poate fi disponibila si pe telefoanele mobile. Pentru a face acest
            lucru,
            atunci
            cand layout-ul ajunge la o latime minima, el se restructureaza pastrand astfel latimea paginii cu cea a
            ecranului.
        </p>
    </section>

    <section>
        <h2>Pagina Administratorului</h2>
        <section>
            <p>
                Pagina administratorului are menirea de a putea modifica parti importante ale site-ului cum ar fi:
                utilizatorii si topicele. Un administrator este un utilizator obisnui decorat cu acest rol. El are
                capacitatea de a crea/sterge alti utilizatori administratori dar si adaugarea/stergerea de topice.
            </p>
        </section>
    </section>
</section>

<section id="performance">
    <h2>Performance</h2>
    <p>
        Deoarece performanta este importanta, aplicatia a fost testata folosind <a href="https://web.dev/measure" target="_blank">Measure</a>
        si a obtinut un scor mediu de peste 90. Un screenshot este atasat mai jos.

        <img style="width: 100%" src="https://i.postimg.cc/j2stCtFK/performance.png" alt="">

        Daca aplicatia este testata din nou, ea va trebui deschisa macar odata deoarece serverele sunt oprite din cauza
        inactivitatii.
    </p>
</section>

<section id="other-resources">
    <h2>Resurse Principale</h2>
    <ul>
        <li>https://youtu.be/fe9t9DGPBuE - Creating A Backend Server Using Python</li>
        <li>https://youtu.be/soGRyl9ztjI - JWT Authentication</li>
        <li>https://youtu.be/mbsmsi7l3r4 - JWT Implementation</li>
        <li>https://www.toptal.com/python/pythons-wsgi-server-application-interface</li>
        <li>https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch</li>
        <li>https://www.delftstack.com/howto/javascript/javascript-download</li>
        <li>https://stackoverflow.com/questions/951021/what-is-the-javascript-version-of-sleep</li>
        <li>https://www.reddit.com/dev/api</li>
        <li>https://dribbble.com/</li>
    </ul>
</section>

</body>
</html>
